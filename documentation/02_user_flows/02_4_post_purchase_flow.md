# Kullanıcı Akışı: Sipariş Sonrası Deneyimler

## 1. Genel Bakış

Bu doküman, kullanıcının ödemeyi tamamladıktan sonraki süreçleri kapsar. Bu akışlar, kullanıcının "Hesabım" paneli üzerinden yönetilir ve sipariş takibi, geçmiş siparişleri görüntüleme ve iade süreçlerini içerir. Bu özellikler sadece giriş yapmış kullanıcılar için geçerlidir.

## 2. Sipariş Geçmişi ve Detayları

**Amaç:** Kullanıcının geçmiş ve mevcut siparişlerine kolayca erişmesini ve tüm detayları şeffaf bir şekilde görmesini sağlamak.

| Adım | Aksiyon                                                                         | Teknik Uygulama                                                                                                     | Yönlendirme / Sonuç                                                                                              |
| :--- | :------------------------------------------------------------------------------ | :------------------------------------------------------------------------------------------------------------------ | :--------------------------------------------------------------------------------------------------------------- |
| 1    | Kullanıcı, hesabım paneline gider (`/hesabim`) ve "Siparişlerim" sekmesine tıklar. | Link -> `/hesabim/siparislerim`                                                                                       | Kullanıcı, tüm siparişlerinin bir listesini içeren sayfaya yönlendirilir.                                        |
| 2    | Sayfada, kullanıcının tüm siparişleri listelenir.                               | `orders` tablosundan `user_id`'ye göre veriler çekilir. Liste, sipariş tarihi, numarası, tutarı ve durumu gibi temel bilgileri içerir. | Kullanıcı, tüm siparişlerini en yeniden eskiye doğru sıralanmış bir şekilde görür.                               |
| 3    | Kullanıcı, listeden bir siparişin detayını görmek için tıklar.                    | Link -> `/hesabim/siparislerim/[orderId]`                                                                             | Kullanıcı, o siparişe özel tüm detayların bulunduğu sayfaya yönlendirilir.                                       |
| 4    | Sipariş detay sayfasında tüm bilgiler gösterilir.                               | `order_items`, `addresses`, `shipments` tablolarından ilgili `orderId`'ye ait tüm veriler birleştirilerek getirilir. | Kullanıcıya şunlar sunulur:<br>- Satın alınan ürünler, miktarları ve fiyatları.<br>- Teslimat ve fatura adresi.<br>- Siparişin ve kargonun güncel durumu (`shipped`, `delivered` vb.).<br>- Kargo takip numarası ve kargo firmasının takip sayfasına direkt link. |

## 3. İade Süreci (RMA - Return Merchandise Authorization)

**Amaç:** Kullanıcının yasal hakları çerçevesinde bir ürünü kolay ve anlaşılır bir şekilde iade edebilmesini sağlamak.

**Not:** Bu akış için veritabanında `returns` ve `return_items` tablolarının oluşturulması gerekmektedir.

| Adım | Aksiyon                                                                                             | Teknik Uygulama                                                                                                                                                                                                                            | Yönlendirme / Sonuç                                                                                                                                                                   |
| :--- | :-------------------------------------------------------------------------------------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 1    | Kullanıcı, sipariş detay sayfasında iade koşullarına uyan bir sipariş için "İade Talebi Oluştur" butonunu görür. | Sipariş durumu `delivered` ise ve üzerinden belirli bir gün geçmemişse (örn: 14 gün) buton aktif olur.                                                                                                                                      | -                                                                                                                                                                                     |
| 2    | Kullanıcı, iade talebi butonuna tıklar.                                                             | Kullanıcı, iade formunun olduğu bir sayfaya veya bir modal'a yönlendirilir.                                                                                                                                                                  | -                                                                                                                                                                                     |
| 3    | Kullanıcı, iade formunu doldurur.                                                                   | Formda, siparişteki ürünler listelenir. Kullanıcı iade etmek istediği ürün(ler)i, miktarını ve bir iade nedeni (örn: "Beden uymadı", "Ürünü beğenmedim") seçer.                                                                             | Kullanıcı, iade etmek istediği ürünleri ve nedenini belirtir.                                                                                                                          |
| 4    | Kullanıcı, "İade Talebini Gönder" butonuna basar.                                                    | Form verileri, `returns` ve `return_items` tablolarına `pending_approval` (onay bekleniyor) durumu ile kaydedilir. Yönetici paneline bu taleple ilgili bir bildirim düşer.                                                                     | Kullanıcıya "İade talebiniz başarıyla alınmıştır. Onay sürecinden sonra size bilgi verilecektir." mesajı gösterilir.                                                                   |
| 5    | Kullanıcı, iade talebinin durumunu "Hesabım" panelinden takip eder.                                  | Kullanıcının `/hesabim` paneline "İadelerim" adında yeni bir sekme eklenir. Bu sayfada, kullanıcının tüm iade talepleri ve güncel durumları (`Onay Bekliyor`, `Onaylandı`, `İade Reddedildi`, `Geri Ödeme Yapıldı`) listelenir. | Kullanıcı, iade sürecinin hangi aşamada olduğunu şeffaf bir şekilde takip edebilir.                                                                                                   | 